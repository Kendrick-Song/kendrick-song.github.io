(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{287:function(s,a,t){s.exports=t.p+"assets/img/image-20230710104445855.ae0e54f7.png"},288:function(s,a,t){s.exports=t.p+"assets/img/image-20230710104509658.7bc9c866.png"},289:function(s,a,t){s.exports=t.p+"assets/img/image-20230710104527551.9335fdfb.png"},320:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker-网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-网络"}},[s._v("#")]),s._v(" Docker 网络")]),s._v(" "),a("h2",{attrs:{id:"理解-docker0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解-docker0"}},[s._v("#")]),s._v(" 理解 Docker0")]),s._v(" "),a("p",[a("img",{attrs:{src:t(287),alt:"image-20230710104445855"}})]),s._v(" "),a("p",[s._v("三个网络")]),s._v(" "),a("p",[a("strong",[s._v("Docker 是如何处理容器网络访问的？")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat01 tomcat\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器内部网络地址 ip addr，发现容器有一个 Docker 分配的 ip 地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" tomcat01 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" addr\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 宿主机 ping 容器内部")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以 ping 通")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("每启动一个 Docker 容器，Docker 就会给它分配一个 ip。桥接模式，使用的是 veth-pair 技术。")]),s._v(" "),a("blockquote",[a("p",[s._v("veth-pair 是一对虚拟设备接口，它们成对出现，一段连着协议，一段彼此相连，充当一个桥梁，连接各种虚拟网络设备")])]),s._v(" "),a("p",[a("img",{attrs:{src:t(288),alt:"image-20230710104509658"}})]),s._v(" "),a("p",[a("strong",[s._v("Docker 中的所有网络接口都是虚拟的，转发效率高。")])]),s._v(" "),a("h2",{attrs:{id:"自定义网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义网络"}},[s._v("#")]),s._v(" 自定义网络")]),s._v(" "),a("p",[s._v("查看所有 Docker 网络")]),s._v(" "),a("p",[a("img",{attrs:{src:t(289),alt:"image-20230710104527551"}})]),s._v(" "),a("p",[a("strong",[s._v("网络模式：")])]),s._v(" "),a("p",[s._v("bridge：桥接（默认）")]),s._v(" "),a("p",[s._v("none：不配置网络")]),s._v(" "),a("p",[s._v("host：和宿主机共享网络")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# create")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# connect")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("好处：")])]),s._v(" "),a("p",[s._v("不同的集群使用不同的网络，保证集群是安全和健康的。")])])}),[],!1,null,null,null);a.default=n.exports}}]);